/**
  react-shears - Trim text with ease!
  @version v1.0.0
  @link https://github.com/edc123/react-shears#readme
  @author Ed Cheng
  @license MIT
**/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("prop-types")):"function"==typeof define&&define.amd?define(["react","prop-types"],t):(e=e||self)["react-shears"]=t(e.React,e.PropTypes)}(this,function(x,e){"use strict";function g(a){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},t=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),t.forEach(function(e){var t,n,r;t=a,r=i[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}return a}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}e=e&&e.hasOwnProperty("default")?e.default:e;function s(e){var t=e.visibleText,n=e.hiddenText;return x.createElement(x.Fragment,null,t,n&&x.createElement(x.Fragment,null,x.createElement("span",{"aria-hidden":"true",unselectable:"on",style:{userSelect:"none"}},"â€¦"),x.createElement("span",{style:{width:"1px",height:"1px",margin:"-1px",border:0,clip:"rect(0, 0, 0, 0)",overflow:"hidden",padding:0,position:"absolute"}},n)))}function v(a,i){var o,u=this;return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=u;clearTimeout(o),o=setTimeout(function(){return a.apply(r,t)},i)}}s.propTypes={visibleText:e.string.isRequired,hiddenText:e.string},s.defaultProps={hiddenText:""};function t(e){var t=e.maxHeight,n=e.text,r=e.tag,a=e.className,i=e.fadeInDuration,o=b(function(e){var n=e.text,r=e.maxHeight,t=e.debounceDuration,a={max:n.length-1,min:0,visibleText:n,hiddenText:"",width:0,binarySearchDone:!1,done:!1},i=x.useRef(null),o=b(x.useReducer(function(e,t){switch(t.type){case"RECEIVE_CONTAINER_DIMENSIONS":return g({},e,t.payload);case"ITERATE_BINARY_SEARCH":case"ITERATE_STEP_SEARCH":return g({},e,t.payload,{visibleText:"".concat(n.slice(0,t.payload.max).trim()),hiddenText:"".concat(n.slice(t.payload.max))});case"ITERATE_DONE":return g({},e,t.payload,{binarySearchDone:!0,done:!0,visibleText:"".concat(n.slice(0,t.payload.max).trim()),hiddenText:"".concat(n.slice(t.payload.max))});case"RESET_STATE":return g({},a,t.payload);default:throw new Error}},a),2),u=o[0],c=o[1],l=b(x.useState(!1),2),d=l[0],s=l[1],f=u.min,p=u.max,y=u.visibleText,E=u.hiddenText,h=u.width,m=u.done,T=u.binarySearchDone;return x.useLayoutEffect(function(){s(!0)},[d]),x.useLayoutEffect(function(){m||c({type:"RECEIVE_CONTAINER_DIMENSIONS",payload:{width:i.current.getBoundingClientRect().width}})},[p,m]),x.useLayoutEffect(function(){c({type:"RESET_STATE"})},[n]),x.useLayoutEffect(function(){function e(){m&&i&&i.current&&i.current.getBoundingClientRect().width!==h&&c({type:"RESET_STATE"})}return window.addEventListener("resize",v(e,t)),function(){window.removeEventListener("resize",v(e,t))}}),x.useLayoutEffect(function(){var e=i.current.getBoundingClientRect().height;if(0<e){if(f<p&&!T&&!m){var t=f+p+1>>1;r<e?p=t-1:f=t,c({type:"ITERATE_BINARY_SEARCH",payload:{min:f,max:p}})}e<=r&&p<n.length-1&&!m&&c({type:"ITERATE_STEP_SEARCH",payload:{binarySearchDone:!0,max:p+1}}),r<e&&T&&!m&&c({type:"ITERATE_DONE",payload:{max:p-1,done:!0}}),e<=r&&p===n.length-1&&c({type:"ITERATE_DONE",payload:{max:n.length}})}},[p]),[i,y,E,d]}({text:n,maxHeight:t,debounceDuration:e.debounceDuration}),4),u=o[0],c=o[1],l=o[2],d=o[3];return n?t&&c?x.createElement(r,{style:{overflow:"hidden",height:"100%",maxHeight:t,opacity:d?1:0,transition:i?"opacity ".concat(i.toString(),"ms"):""},className:a},x.createElement("div",{ref:u,style:{height:"100%"}},x.createElement(s,{visibleText:c,hiddenText:l}))):n:null}return t.propTypes={maxHeight:e.number.isRequired,text:e.element.isRequired,tag:e.string,className:e.string,fadeInDuration:e.number,debounceDuration:e.number},t.defaultProps={tag:"div",className:"",fadeInDuration:0,debounceDuration:200},t});
