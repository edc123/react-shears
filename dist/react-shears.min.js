/**
  react-shears - Trim text with ease!
  @version v0.0.3
  @link https://github.com/edc123/react-shears#readme
  @author Ed Cheng
  @license MIT
**/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("prop-types")):"function"==typeof define&&define.amd?define(["react","prop-types"],t):(e=e||self)["react-shears"]=t(e.React,e.PropTypes)}(this,function(g,e){"use strict";function x(i){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},t=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),t.forEach(function(e){var t,n,r;t=i,r=a[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}return i}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}e=e&&e.hasOwnProperty("default")?e.default:e;function s(e){var t=e.visibleText,n=e.hiddenText;return g.createElement(g.Fragment,null,t,n&&g.createElement(g.Fragment,null,g.createElement("span",{"aria-hidden":"true",unselectable:"on",style:{userSelect:"none"}},"â€¦"),g.createElement("span",{style:{width:"1px",height:"1px",margin:"-1px",border:0,clip:"rect(0, 0, 0, 0)",overflow:"hidden",padding:0,position:"absolute"}},n)))}function b(n,r){var i;return function(){var e=this,t=arguments;clearTimeout(i),i=setTimeout(function(){i=null,n.apply(e,t)},r)}}s.propTypes={visibleText:e.string.isRequired,hiddenText:e.string},s.defaultProps={hiddenText:""};function t(e){var t=e.maxHeight,n=e.text,r=e.tag,i=e.className,a=R(function(e){var n=e.text,t=e.maxHeight,r={max:n.length-1,min:0,visibleText:n,hiddenText:"",offsetWidth:0,offsetHeight:0,binaryDone:!1,done:!1},i=R(g.useReducer(function(e,t){switch(t.type){case"RECEIVE_CONTAINER_DIMENSIONS":return x({},e,t.payload);case"ITERATE_BINARY_SEARCH":case"ITERATE_STEP_SEARCH":return x({},e,t.payload,{visibleText:"".concat(n.slice(0,t.payload.max)),hiddenText:"".concat(n.slice(t.payload.max)),offsetHeight:0});case"ITERATE_DONE":return x({},e,t.payload,{binaryDone:!0,done:!0,visibleText:"".concat(n.slice(0,t.payload.max)),hiddenText:"".concat(n.slice(t.payload.max))});case"CONTAINER_RESIZED":return x({},r);default:throw new Error}},r),2),a=i[0],o=i[1],u=a.min,c=a.max,l=a.visibleText,s=a.hiddenText,d=a.offsetWidth,f=a.offsetHeight,p=a.done,y=a.binaryDone,E=g.useRef(null),h=R(g.useState(!1),2),m=h[0],T=h[1];return g.useLayoutEffect(function(){p||o({type:"RECEIVE_CONTAINER_DIMENSIONS",payload:{offsetWidth:E.current.getBoundingClientRect().width,offsetHeight:E.current.getBoundingClientRect().height}})},[c,p]),g.useLayoutEffect(function(){T(!0)},[m]),g.useLayoutEffect(function(){function e(){p&&E&&E.current&&0<d&&0<E.current.getBoundingClientRect().width&&E.current.getBoundingClientRect().width!==d&&o({type:"CONTAINER_RESIZED"})}return window.addEventListener("resize",b(e,1e3)),function(){window.removeEventListener("resize",b(e,1e3))}}),g.useEffect(function(){if(0<f){if(u<c&&!y&&!p){var e=u+c+1>>1;t<f?c=e-1:u=e,o({type:"ITERATE_BINARY_SEARCH",payload:{min:u,max:c}})}f<=t&&c<n.length&&!p&&o({type:"ITERATE_STEP_SEARCH",payload:{binaryDone:!0,max:c+1}}),t<f&&y&&!p&&o({type:"ITERATE_DONE",payload:{max:c-1,done:!0}}),f<=t&&c===n.length-1&&o({type:"ITERATE_DONE",payload:{max:n.length}})}},[f]),[E,l,s,m]}({text:n,maxHeight:t}),4),o=a[0],u=a[1],c=a[2],l=a[3];return n&&t&&u?g.createElement(r,{style:{overflow:"hidden",maxHeight:t,opacity:l?1:0,transition:"opacity 200ms"},className:i},g.createElement("div",{ref:o},g.createElement(s,{visibleText:u,hiddenText:c}))):n}return t.propTypes={maxHeight:e.number.isRequired,text:e.element.isRequired,tag:e.string,className:e.string},t.defaultProps={tag:"div",className:""},t});
